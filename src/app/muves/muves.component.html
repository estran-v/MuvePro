<app-nav></app-nav>
<div class="container">
  <clr-tabs>
    <clr-tab>
      <button clrTabLink (click)="depotActive=true;listActive=false;">Déposer</button>
      <ng-template [(clrIfActive)]="depotActive">
        <clr-tab-content>
          <div class="container">
            <div class="starter-template" style="padding: 30px!important;padding-top: 0px !important;">
              <h1>
                <i>Déposer un muve sponsorisé</i>
              </h1>
              <p style="    width: 70%;
    margin: auto;
    margin-top: 15px;">
                <i *ngIf="positionActive">
                  Pour déposer un muve sponsorisé, il n'y a rien de plus simple, il vous suffit d'entrer
                  l'adresse à laquelle vous voulez déposer votre muve dans le champ ci-dessous, ou bien de cliquer
                  à un endroit sur la carte encore plus bas.
                </i>
                <i *ngIf="contenuActive">
                  Maintenant que vous avez choisis la position de votre Muve,
                  il ne vous reste plus qu'à remplir son contenu !
                </i>
                <i *ngIf="confirmationActive">
                  Très bien !<br>
                  Il ne vous reste plus qu'à confirmer le dépot de votre Muve, et c'est terminé !
                </i>
              </p>
            </div>

            <clr-tabs>
              <clr-tab>
                <button clrTabLink (click)="positionActive=true;confirmationActive=false;contenuActive=false;">Position
                </button>
                <ng-template [(clrIfActive)]="positionActive">
                  <clr-tab-content>
                    <div style="margin-top: 50px;" class="text-center">
                      <form>
                        <input style="    margin-bottom: 20px;
    width: 40%;
    text-align: -webkit-center;
    border-radius: 6px;" type="text" [(ngModel)]="whereTo" name="whereTo"
                               placeholder="Ou voulez-vous poser votre muve ?" #search>
                        <button class="btn btn-primary" (click)="selectPos()">
                          Définir
                        </button>
                      </form>
                    </div>

                    <h3 style="    text-align: -webkit-center;
    opacity: 0.5;
    margin-bottom: 20px;">
                      <i>où</i>
                    </h3>

                    <agm-map
                      [latitude]="lat"
                      [longitude]="lng"
                      [zoom]="zoom"
                      [disableDefaultUI]="true"
                      [zoomControl]="false"
                      (mapClick)="mapClicked($event)">
                      <agm-marker [latitude]="lat" [longitude]="lng"></agm-marker>
                    </agm-map>
                  </clr-tab-content>
                </ng-template>
              </clr-tab>
              <clr-tab>
                <button clrTabLink (click)="positionActive=false;confirmationActive=false;contenuActive=true;">Contenu
                </button>
                <ng-template [(clrIfActive)]="contenuActive">
                  <clr-tab-content>
                    <form class="form" [formGroup]="muveForm" (ngSubmit)="sendContentForm()" [hidden]="submitted">
                      <section class="form-block">
                        <label></label>
                        <div class="form-group">
                          <label for="muveTitle">Titre</label>
                          <input id="muveTitle" type="text"
                                 formControlName="title">
                          <span class="tooltip-content">
                    Le titre est requis
                </span>
                        </div>
                        <div class="form-group">
                          <label for="muveArtist">Artiste</label>
                          <input id="muveArtist" type="text"
                                 formControlName="artist">
                          <span class="tooltip-content">
                        L'artiste est requis
                    </span>
                        </div>
                        <div class="form-group">
                          <label for="muveDescription">Description</label>
                          <textarea id="muveDescription"
                                    formControlName="description"></textarea>
                          <span class="tooltip-content">
                        La description est requise
                    </span>
                        </div>
                        <div class="form-group">
                          <label for="muveDuration">Durée</label>
                          <input id="muveDuration" type="number"
                                 formControlName="duration">
                          <span class="tooltip-content">
                        La durée est requise (en jours)
                    </span>
                        </div>
                        <div class="form-group">
                          <label for="muveRadius">Rayon du Muve</label>
                          <input id="muveRadius" type="number"
                                 formControlName="radius">
                          <span class="tooltip-content">
                        Le rayon est requis (en km)
                    </span>
                        </div>
                        <div class="form-group">
                          <label for="muveRadius">Estimation du prix</label>
                          <span class="tooltip-content">
                        {{ estimatedPrice + ' €'}}
                    </span>
                        </div>
                        <button class="btn btn-primary"
                                type="submit"
                                [disabled]="muveForm.invalid">Confirmer
                        </button>
                      </section>
                    </form>
                  </clr-tab-content>
                </ng-template>
              </clr-tab>
              <clr-tab>
                <button clrTabLink>Confirmation</button>
                <ng-template [(clrIfActive)]="confirmationActive">
                  <clr-tab-content>
                    <div *ngIf="latConfirm && lngConfirm && this.muveForm.valid">
                      <form>
                        <agm-map
                          [latitude]="latConfirm"
                          [longitude]="lngConfirm"
                          [zoom]="zoom"
                          [disableDefaultUI]="true"
                          [zoomControl]="false">
                          <agm-marker [latitude]="latConfirm" [longitude]="lngConfirm"></agm-marker>
                          <agm-circle [latitude]="latConfirm" [longitude]="lngConfirm"
                                      [radius]="currentRadius * 1000"></agm-circle>
                        </agm-map>

                        <input style="    margin-bottom: 20px;
    width: 40%;
    text-align: -webkit-center;
    border-radius: 6px;" type="text" [(ngModel)]="whereTo" name="whereTo"
                               placeholder="Ou voulez-vous poser votre muve ?" #search>
                        <button class="btn btn-primary" (click)="selectPos()">
                          Définir
                        </button>
                      </form>
                    </div>
                    <div style="margin-top: 50px;" class="text-center" *ngIf="!latConfirm && !lngConfirm">
                      <p style="    width: 70%;
    margin: auto;
    margin-top: 15px;">
                        Vous devez d'abord définir un endroit ou déposer votre Muve ! Pour le faire, cliquez sur le
                        bouton
                        ci-dessous pour retourner au premier onglet :<br>
                        <button class="btn btn-primary" (click)="confirmationActive=false;positionActive=true;">
                          Position
                        </button>

                      </p>
                    </div>
                    <div style="margin-top: 50px;" class="text-center"
                         *ngIf="(latConfirm && lngConfirm) && !this.muveForm.valid">
                      <p style="    width: 70%;
    margin: auto;
    margin-top: 15px;">
                        Vous devez d'abord remplir votre Muve avant de le déposer ! Pour le faire, cliquez sur le bouton
                        ci-dessous pour retourner au deuxième onglet :<br>
                        <button class="btn btn-primary" (click)="confirmationActive=false;contenuActive=true;">
                          Contenu
                        </button>

                      </p>
                    </div>

                  </clr-tab-content>
                </ng-template>
              </clr-tab>
            </clr-tabs>
          </div>
        </clr-tab-content>
      </ng-template>
    </clr-tab>
    <clr-tab>
      <button clrTabLink (click)="depotActive=false;listActive=true;">Liste</button>
      <ng-template [(clrIfActive)]="listActive">
        <clr-tab-content>
          <div class="container">
            <div class="starter-template" style="padding: 30px!important;padding-top: 0px !important;">
              <h1>
                <i>Liste de vos muves sponsorisés</i>
              </h1>
              <p style="    width: 70%;
    margin: auto;
    margin-top: 15px;">
                <i>
                  Historique de vos muves sponsorisés
                </i>
              </p>
            </div>

            <table class="table">
              <thead>
              <tr>
                <th>Decimal</th>
                <th>Hexadecimal</th>
                <th>Binary</th>
                <th>Roman Numeral</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>1</td>
                <td>1</td>
                <td>1</td>
                <td>I</td>
              </tr>
              <tr>
                <td>5</td>
                <td>5</td>
                <td>101</td>
                <td>V</td>
              </tr>
              <tr>
                <td>10</td>
                <td>A</td>
                <td>1010</td>
                <td>X</td>
              </tr>
              <tr>
                <td>15</td>
                <td>F</td>
                <td>1111</td>
                <td>XV</td>
              </tr>
              </tbody>
            </table>
          </div>
        </clr-tab-content>
      </ng-template>
    </clr-tab>
  </clr-tabs>

  <clr-modal [(clrModalOpen)]="pickPos">
    <h3 class="modal-title">Êtes-vous sûr de vouloir déposer votre muve à cet endroit ?</h3>
    <div class="modal-body" style="text-align: -webkit-center;">
      <p>
        {{place.formatted_address}}<br>
        {{ '(' + place.geometry.location.lat() + ', ' + place.geometry.location.lng() + ')'}}
      </p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline" (click)="handleBtn(false)">Non</button>
      <button type="button" class="btn btn-primary" (click)="handleBtn(true)">Oui</button>
    </div>
  </clr-modal>

</div>




