<app-nav></app-nav>
<div class="container">
  <div class="starter-template" style="padding: 30px!important;padding-top: 0px !important;">
    <h1>
      <i>Déposer un muve sponsorisé</i>
    </h1>
    <p style="    width: 70%;
    margin: auto;
    margin-top: 15px;">
      <i>
        Pour déposer un muve sponsorisé, il n'y a rien de plus simple, il vous suffit d'entrer
        l'adresse à laquelle vous voulez déposer votre muve dans le champ ci-dessous, ou bien de cliquer
        à un endroit sur la carte encore plus bas.
      </i>
    </p>
  </div>


  <clr-tabs>
    <clr-tab>
      <button clrTabLink (click)="positionActive=true;confirmationActive=false;contenuActive=false;">Position</button>
      <ng-template [(clrIfActive)]="positionActive">
        <clr-tab-content>
          <div style="margin-top: 50px;" class="text-center">
            <form>
              <input style="    margin-bottom: 20px;
    width: 40%;
    text-align: -webkit-center;
    border-radius: 6px;" type="text" [(ngModel)]="whereTo" name="whereTo"
                     placeholder="Ou voulez-vous poser votre muve ?" #search>
              <button class="btn btn-primary" (click)="selectPos()">
                Définir
              </button>
            </form>
          </div>

          <h3 style="    text-align: -webkit-center;
    opacity: 0.5;
    margin-bottom: 20px;">
            <i>où</i>
          </h3>

          <agm-map
            [latitude]="lat"
            [longitude]="lng"
            [zoom]="zoom"
            [disableDefaultUI]="true"
            [zoomControl]="false"
            (mapClick)="mapClicked($event)">
            <agm-marker [latitude]="lat" [longitude]="lng"></agm-marker>
          </agm-map>
        </clr-tab-content>
      </ng-template>
    </clr-tab>
    <clr-tab>
      <button clrTabLink (click)="positionActive=false;confirmationActive=false;contenuActive=true;">Contenu</button>
      <ng-template [(clrIfActive)]="contenuActive">
        <clr-tab-content>
          <form class="form" [formGroup]="muveForm" (ngSubmit)="sendContentForm()" [hidden]="submitted">
            <section class="form-block">
              <label></label>
              <div class="form-group">
                <label for="muveTitle">Titre</label>
                <input id="muveTitle" type="text"
                       formControlName="title">
                <span class="tooltip-content">
                    Name is required.
                </span>
              </div>
              <div>
                <div class="form-group">
                  <label for="muveArtist">Artiste</label>
                  <input id="muveArtist" type="text"
                         formControlName="artist">
                  <span class="tooltip-content">
                        Postal code is required.
                    </span>
                </div>
                <div class="form-group">
                  <label for="muveDescription">Description</label>
                  <textarea id="muveDescription"
                            formControlName="description"></textarea>
                  <span class="tooltip-content">
                        Country is required.
                    </span>
                </div>
              </div>
              <button class="btn btn-primary"
                      type="submit"
                      [disabled]="muveForm.invalid">Confirmer
              </button>
            </section>
          </form>
        </clr-tab-content>
      </ng-template>
    </clr-tab>
    <clr-tab>
      <button clrTabLink>Confirmation</button>
      <ng-template [(clrIfActive)]="confirmationActive">
        <clr-tab-content>
          <form>
            <agm-map
              [latitude]="latConfirm"
              [longitude]="lngConfirm"
              [zoom]="zoom"
              [disableDefaultUI]="true"
              [zoomControl]="false">
              <agm-marker [latitude]="latConfirm" [longitude]="lngConfirm"></agm-marker>
              <agm-circle [latitude]="latConfirm" [longitude]="lngConfirm" [radius]="muve.radius * 1000"></agm-circle>
            </agm-map>

            <input style="    margin-bottom: 20px;
    width: 40%;
    text-align: -webkit-center;
    border-radius: 6px;" type="text" [(ngModel)]="whereTo" name="whereTo"
                   placeholder="Ou voulez-vous poser votre muve ?" #search>
            <button class="btn btn-primary" (click)="selectPos()">
              Définir
            </button>
          </form>
        </clr-tab-content>
      </ng-template>
    </clr-tab>
  </clr-tabs>


  <clr-modal [(clrModalOpen)]="pickPos">
    <h3 class="modal-title">Êtes-vous sûr de vouloir déposer votre muve à cet endroit ?</h3>
    <div class="modal-body" style="text-align: -webkit-center;">
      <p>
        {{place.formatted_address}}<br>
        {{ '(' + place.geometry.location.lat() + ', ' + place.geometry.location.lng() + ')'}}
      </p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline" (click)="handleBtn(false)">Cancel</button>
      <button type="button" class="btn btn-primary" (click)="handleBtn(true)">Ok</button>
    </div>
  </clr-modal>

</div>




